#+TITLE: Bayes Nash equilibrium
#+AUTHOR:    Christoph Schottm√ºller
#+DATE:       
#+DESCRIPTION:
#+KEYWORDS:
#+LANGUAGE:  en
#+OPTIONS:   H:2 num:t toc:nil \n:nil @:t ::t |:t ^:t -:t f:t *:t <:t
#+OPTIONS:   TeX:t LaTeX:t skip:nil d:nil todo:t pri:nil tags:not-in-toc
#+INFOJS_OPT: view:nil toc:nil ltoc:t mouse:underline buttons:0 path:http://orgmode.org/org-info.js
#+EXPORT_SELECT_TAGS: export
#+EXPORT_EXCLUDE_TAGS: noexport

#+startup: beamer
#+LaTeX_CLASS: beamer
#+LaTeX_CLASS_OPTIONS: [bigger]
#+BEAMER_FRAME_LEVEL: 2
#+latex_header: \mode<beamer>{\useinnertheme{rounded}\usecolortheme{rose}\usecolortheme{dolphin}\setbeamertemplate{navigation symbols}{}\setbeamertemplate{footline}[frame number]{}}
#+latex_header: \mode<beamer>{\usepackage{amsmath}\usepackage{ae,aecompl,sgamevar,tikz}}
#+LATEX_HEADER:\let\oldframe\frame\renewcommand\frame[1][allowframebreaks]{\oldframe[#1]}
#+LATEX_HEADER: \setbeamertemplate{frametitle continuation}[from second]
#+LATEX_HEADER: \newcommand{\Ra}{\Rightarrow} \newcommand{\ra}{\rightarrow} \newcommand{\Lra}{\Leftrightarrow}

** Introduction
- so far
  - need to look at games of incomplete information (preference aggregation when preferences are private, auctions)
  - under certain assumptions decision makers can be modeled as expected utility maximizers
- still missing
  - how to react to information?
  - strategic interaction under uncertainty


* Bayes' rule
** Bayes' rule: A simple example
   - I know someone who lives in Munich. What is the probability that this person is male?
   - I know someone who lives in Munich and who is 1.90 m tall. What is the probability that this person is male?
   - I know someone who lives in Munich and has green eyes. What is the probability that this person is male?
# about 1/2, definitely higher than 1/2 as there are more men than women with this height, about 1/2 as the fraction of mean and women with green eyes is about the same
# eye color does not give more information on gender while height does; in statistics eye color and gender would be called independent while height and gender a correlated
** Bayes' rule
*** Bayes' rule
   For two events $A$ and $B$
   $$P(A|B)=\frac{P(B|A) P(A)}{P(B)}.$$
   
*** :B_ignoreheading:BMCOL:
    :PROPERTIES:
    :BEAMER_env: ignoreheading
    :BEAMER_col: 0.4
    :END:
- easier to remember as $P(A|B)P(B)=P(B|A)P(A)$ which is also equal to $P(A\cap B)$
- hence, $P(A|B)=P(A\cap B)/P(B)$  

#+BEGIN_SRC latex   
  \begin{figure}   
  \begin{tikzpicture}[scale=0.7]
  \draw[thick] (0,0) rectangle (3,3) ;
  \draw [blue] (1,1.2) circle [radius=0.9];
  \draw[red] (1,1.2) rectangle (2.5,2.5) ;
   \node[right,red] at (2.4,2.5) {$A$};
  \node[right,blue] at (1.6,0.6) {$B$};
  \node at (1.42,1.45) {\tiny$A\cap B$}; 
  \end{tikzpicture}
  \end{figure}
#+End_SRC

** Bayes' rule: example
   - an antigen test for a certain virus is 70% reliable at detecting an illness and 99.5% reliable at correctly reporting that somebody is healthy
   - suppose about 80.000 people are currently infected with the virus
   - suppose 80 million people live in Germany
   - if a random person takes the test and the test is positive, what is the probability that this person is infected?
     # P(infect)= 80.000/80mil = 0.001 , P(pos test| infect)=0.7, P(pos test)=0.001*0.7+0.999*0.005=
     # P(infect|pos test) = 0.7*0.001/(0.005695)=0.1229 i.e. 12 %
** Bayes' rule: comments
   - calculations are reasonably simple
   - intuition often goes wrong when the prior is extremely skewed
   - make sure to understand it as it will often loom in the background
** Independence
*** Independence
    Two random variables $X$ and $Y$ are independent if
     $$P(X=x,Y=y)=P(X=x)P(Y=y).$$

*** :B_ignoreheading:BMCOL:
    :PROPERTIES:
    :BEAMER_env: ignoreheading
    :BEAMER_col: 0.4
    :END:

   - by Bayes' rule, $P(X=x|Y=y)=P(X=x)$ if $X$ and $Y$ are independent
     - knowing $Y$ does not affect my belief about $X$ 

   - independence will often be assumed to keep the models simple   
* Games of incomplete information
** Games of incomplete information I: an example
- two firms simultaneously decide whether to enter (E) a new market or not (N)

  
#+Caption: Payoffs 
|    | E             | N  |
|----+---------------+-----|
| /  | <             |     |
| E | $t_1-3,t_2-3$ | $t_1,0$ |
| N | $0,t_2$    | 0,0 |

- $t_i$ is the quality of firm $i$'s product which is either 2 or 4
- each firm knows its own quality but not the quality of its competitor  
- how to solve this game?

** Games of incomplete information IV: belief/nature
   - add a belief to the game description:
     - with which probability does firm $i$ believe the quality of $j$ is low/high?
     - e.g. $p(2)=p(4)=1/2$ (independent of $i$'s quality)
     - we assume that $i$ knows or anticipates $j$'s belief
   - alternative story:
     - a player called /nature/ chooses in a first step the quality of both firms
     - e.g. nature chooses $2$ and $4$ both with probability $1/2$
     - the incumbent observes the costs chosen by nature and the entrant does not
     - afterwards players play the game
     - as this game description is common knowledge, each firm $i$ views both $2$ and $4$ as equally likely for $t_j$ and knows that the other firm does so as well
   - maximize expected utility (use belief to construct expectation)

** Games of incomplete information V: strategy
   - a strategy of a player is a /complete plan of action/
     - a pure strategy of firm $i$ consists of one action in case it has quality of 2 and one action in case it has quality 4!
     - nature interpretation: a strategy tells you how to act at every point in the game tree!

       
** Games of incomplete information VI:  back to example
   - assume that each player believes that the other player has $t_i=2$ with probability $1/2$ and $t_i=4$ with probability $1/2$ (independent of own type) 

#+Caption: Payoffs 
|    | E             | N  |
|----+---------------+-----|
| /  | <             |     |
| I  | $t_1-3,t_2-3$ | t_1,0 |
| N | $0,t_2$    | 0,0 |

- what is a firm's optimal strategy if  $t_i=4$?
- if the firm $j$ plays E with probability $s_j$ in case $t_j=2$, what is $i$'s best response if $t_i=2$?
- what are the equilibria in this game?

# t_i=4 has dominant action to enter, for t_i=2 u_i^E=1/2 * (2-3) +1/2 * (s_j*(-1)+(1-s_j)*2) while u_i^N=0, hence b.r. is enter iff s_j\leq 1/3.
# BNE: asymmetric and pure: one firm enters with both types and the other only if t_i=4; symmetric and mixed: both firms enter if $t_i=4 and enter with probability 1/3 if t_i=2
   
** Games of incomplete information VII: description
   A (static) game of incomplete information consists of
   - set of players
   - action set for each player ($S_i$)
   - a "type set" for each player ($T_i$)
   - a probability distribution $p$ over types from which nature draws
   - a utility function $u_i$ for each player that depends on chosen strategies and types

** pure strategy Bayesian Nash equilibrium
   - a pure strategy for each player $s_i: T_i\rightarrow S_i$
     - recall: a pure strategy assigns to each type of a player one action
   - the action of each type of player $i$ maximizes expected utility of player $i$ given the strategies of all the other players 


* Public good example

** public good example I
   - $N$ guests at a garden party
   - each guest has to decide whether to bring a speaker to play music, $S_i=\{0,1\}$
   - payoff of player $i$:
     - zero if no one brings a speaker
     - $t_i$ if someone else brought a speaker
     - $t_i-1/2$ if person $i$ brought a speaker
   - $t_i$ are independently distributed and $1$ (high) with probability $2/3$ and $0$ (low) with probability $1/3$
   - we want to find a /symmetric BNE/, i.e. one where\linebreak (i) the high types of all players use the same action \linebreak (ii) the low types of all players use the same action

** public good example II
   - what is the optimal strategy of a low type?
     # do not bring speaker
   - suppose all high types bring a speaker with probability $\alpha$
     - for player $i$: what is the probability that no one else brings a speaker?
     # prob that j brings speaker is 2\alpha/3 -> (1-2\alpha/3)^(N-1)
     - what is the expected payoff for a high type of player $i$ when bringing the speaker?
     # 1-1/2=1/2
     - what is the expected payoff for a high type of player $i$ when not bringing the speaker?
     # 1-(1-2\alpha/3)^(N-1)
   - which value of $\alpha$ gives a BNE?
     # 1/2=1-(1-2\alpha/3)^(N-1), i.e. (1/2)^(1/(N-1))=1-2\alpha/3 or \alpha = 3/2[1-(1/2)^(1/(N-1))]
     \vspace*{0.5cm}
#+BEGIN_SRC latex   
      \begin{figure}   
      \begin{tikzpicture}
      \draw[<->,thick] (1,1) -- (1,0) -- (10,0);
      \draw[thick,domain=2:10, blue] plot (\x,{1.5*(1-(0.5)^(1/(\x-1)))});
      \node[left] at (1,1.1) {$\alpha$};
      \node[right] at (10,0) {$N$};
      \node[below] at (5,0){5};
      \node[below] at (2,0){2};
    \node[below] at (10,0){10};
    \node[left] at (1,0.5){\tiny 1/2};
     \draw (0.95,0.5)--(1.05,0.5);
     \draw (0.95,0.75)--(1.05,0.75);
  \node[left] at (1,0.75){\tiny 3/4};
      \end{tikzpicture}
      \end{figure}
#+End_SRC



* (Very) simple poker

** very simple poker I
   - 2 players
   - each player privately observes his card/type which is either high ($t_h$) or low ($t_l$)
   - probability of high card is $\alpha\in(0,1)$ (independent across players)
   - players simultaneously either /raise/ ($f$) or /fold/ ($f$)
   - payoffs:
     - $(0,0)$ if both fold or both raise and have the same card
     - $1$ for raising and $-1$ for folding player if actions do not coincide
     - $2$ for high type and $-2$ for low type if both raise and cards differ

** very simple poker II
   - what should a high type play?
     \vspace*{1.5cm}
     # raise is dominant: if other player folds, raise is better; if other raises, raising is better (for both types of opponent)
   - for which $\alpha$ is $s(t_h)=r$ and $s(t_l)=f$ a symmetric BNE? 
     \vspace*{2cm}
     # high type: $U(r,t_h)=\alpha*0+(1-\alpha)*2>\alpha*(-1)+(1-\alpha)*0=U(f,t_l)$ => high type plays b.r.; low type: $U(f,t_l)=\alpha*(-1)+(1-\alpha)*0=-\alpha$ while $U(r,t_l)=\alpha*(-2)+(1-\alpha)*1=1-3\alpha$. Therefore, BNE iff $\alpha\geq 1/2$.
   - what it the symmetric BNE if the above strategy is not?
     # $s(t_h)=s(t_l)=r$: low type $U(r,t_l)=\alpha*(-2)+(1-\alpha)*0$ while $U(f,t_l)=-1$; hence BNE if $\alpha\leq 1/2$

* Jury voting
** jury voting I
   players, actions, payoffs:
   - jury with two members ("jurors")
   - jurors simultaneously vote whether to /acquit/ ($a$) or /convict/ ($c$)
   - if both vote $c$, defendant is convicted; otherwise acquitted
   - each juror has payoff
     - 1 if the defendant is either (i) guilty and convicted or (ii) innocent and acquitted
     - 0 otherwise
** jury voting II
   information:
   - before seeing the evidence each juror thinks that the defendant is guilty with probability 0.6
   - each juror $j$ has his own expertise in interpreting the evidence
     - signal $t_j\in\{i,g\}$ where $\sigma_i$ "is correct" with probability $0.8$
       - $t_j=i$ with probability $0.8$ if the defendant is innocent and with probability $0.2$ if he is guilty
       - $t_j=g$ with probability $0.8$ if the defendant is guilty and with probability $0.2$ if he is innocent
     - signal $t_j$ is private information of juror $j$
     - signals are assumed to be independent conditional on the defendant's status
** jury voting III
   - let $\mu_j$ be juror $j$'s belief that the defendant is guilty
   - determine $\mu_j$ after $j$ receives signal $g$
     \vspace*{1cm}
     # (0.6*0.8)/(0.6*0.8+0.4*0.2)=6/7
   - determine $\mu_j$ after $j$ receives signal $i$
     \vspace*{1cm}
     # (0.6*0.2)/(0.6*0.2+0.4*0.8)=12/44=3/11
   # - how would a juror vote if he had to decide on his own?
     # acquit if signal i, convict if signal g
   - if juror 1 knew that $t_2=g$ and $t_1=i$, what would $\mu_j$ be?
     \vspace*{1cm}
     # (0.6*0.8*0.2)/(0.6*0.8*0.2+0.4*0.2*0.8)=0.6
   - is the strategy $s(i)=a$ and $s(g)=c$ a symmetric BNE?
     # No: suppose $t_j=i$. juror $j$'s vote matters only if the other juror voted $c$, i.e. if his signal is g; but in this case his belief that the defendant is guilty is greater than 1/2...therefore a is best response!
** jury voting IV: symmetric BNE
   - if $t_j=g$, then $\mu_j>1/2$ even if $j$ knew that $t_{-j}=i$
     \linebreak $\rightarrow$ $s(g)=c$
   - let each juror vote $c$ with probability $\gamma$ after receiving signal $i$
     - determine the probability that $j$ votes $c$
       \vspace*{0.5cm}
       # 0.6+0.4*\gamma
     - determine the expected payoff of $j$ if $t_j=i$ and he votes convict
       \vspace*{1.3cm}
       # pivotal if other votes c; then \mu_j = (0.6*0.2*(0.8+0.2*\gamma)) / (0.6*0.2*(0.8+0.2*\gamma)+0.4*0.8*(0.2+0.8*\gamma))=(0.096+0.024\gamma) / (0.16+0.28) and payoff of c equals mu_j
     - determine the expected payoff of $j$ if $t_j=i$ and he votes acquit
       \vspace*{0.7cm}
       # same mu_j but payoff is now (1-\mu_j)
     - which $\gamma\in[0,1]$ leads to a symmetric BNE?
       \vspace*{0.5cm}
       # indifference condition after receiving signal i: the above calculated mu_j=1/2 which is equivalent to $\gamma=4/29$

* Pricing  with private costs
** Pricing  with private costs 
   - 2 firms set prices, $p_i\in[0,1]$, in order to maximize profits
   - demand of firm $i$ equals $1-p_i+p_j/2$
   - firm $i$ has constant marginal costs $t_i\in\{0.3,0.5\}$
   - $t_i$ is private information and both types are equally likely
   - find a symmetric BNE
     \vspace*{3cm}
  # symmetric strategy: p^l, p^h;
  # expected profit: 0.5*(p_i-t_i)(1-p_i+p^l/2)+0.5*(p_i-t_i)(1-p_i+p^h/2)
  # foc: -(p_i-t_i)+0.5*(1-p_i+p^l/2)+0.5*(1-p_i+p^h/2)=0
  # b.r.: p_i(t_i) = (t_i+1+p^l/4+p^h/4) / 2=1/2+t_i/2+p^l/8+p^h/8
  # eq. conditions: p^l = 1/2+0.3/2+p^l/8+p^h/8 and p^h = 1/2+0.5/2+p^l/8+p^h/8
  # BNE: p^l=0.88333 p^h=0.98333
